<div class=" flex justify-center gap-4">
    <p-button (click)="showDialog()" label="住祝 砖专转" />
    <p-dialog [(visible)]="visible" [modal]="true" [style]="{ width: '25rem'}" class="dialog">
        <ng-template #header>
            <div class="inline-flex items-center justify-center gap-2">
                <p-avatar image={{profileImgUrl}} shape="circle" />
                <span class="font-bold whitespace-nowrap">{{userName}}</span>
            </div>
        </ng-template>
        <span class="text-surface-500 dark:text-surface-400 block mb-8">住祝 砖专转 砖</span>
        <div class="flex items-center gap-4 mb-4">
            <p-floatlabel variant="on">
                <input pInputText  id="title" class="flex-auto" autocomplete="off" [(ngModel)]=titled />
                <label for="title" class="font-semibold w-24">砖</label>
            </p-floatlabel>
        </div>
        <div class="flex items-center gap-4 mb-2">
            <p-floatlabel class="w-full md:w-56" variant="on">
                <p-select [(ngModel)]="categoryId" [editable]="true" inputId="on_label" autocomplete="off" [options]="categories" optionValue="id" optionLabel="name" class="w-full" />
                <label for="on_label">拽专</label>
            </p-floatlabel>
        </div>
        <div class="mb-6">
            <p-floatlabel variant="on">
                <textarea pTextarea rows="5" cols="30" style="resize: none" class="w-full"  id="desc" [(ngModel)]=description ></textarea>
                <label for="desc">转专</label>
            </p-floatlabel>
        </div>

                <div class="flex items-center gap-6 mb-2">
                <p-floatlabel variant="on">
                <p-inputnumber [(ngModel)]="timeValue" prefix="" [showButtons]="true" buttonLayout="horizontal" inputId="horizontal" spinnerMode="horizontal" [step]="0.5">
                    <ng-template #incrementbuttonicon>
                        <span class="pi pi-plus"></span>
                    </ng-template>
                    <ng-template #decrementbuttonicon>
                        <span class="pi pi-minus"></span>
                    </ng-template>
                    </p-inputnumber>
                <label for="horizontal">注专 砖注转</label>
                </p-floatlabel>
        </div>
                        <div class="flex items-center gap-4 mb-4">
            <p-floatlabel variant="on">
                <input pInputText  id="when" class="flex-auto" autocomplete="off" [(ngModel)]=optionalTime />
                <label for="when" class="font-semibold w-24">转 驻砖专?</label>
            </p-floatlabel>
        </div>
                <div class="flex items-center gap-4 mb-4">
    <p-floatlabel variant="on">
        <p-fileUpload
        #fileUpload 
            mode="basic" 
            chooseLabel="专 转"
            accept="image/*" 
            maxFileSize="1000000"
            [auto]="true" 
            [customUpload]="true"
            (onSelect)="onFileSelected($event)"
            [showUploadButton]="false"
            [showCancelButton]="false"
            fileLimit="1">
        </p-fileUpload>
    </p-floatlabel>
</div>

<div *ngIf="imagePreviewUrl" class="mt-3 relative flex flex-column items-center">
        <img [src]="imagePreviewUrl" class="rounded-circle shadow-lg" 
             style="width: 100px; height: 100px; object-fit: cover; border: 3px solid var(--primary-color);">
        
        <p-button 
            icon="pi pi-times" 
            severity="danger" 
            [rounded]="true" 
            [text]="true"
            size="small"
            label="拽 转"
            (onClick)="removeImage(fileUpload)">
        </p-button>
    </div>
        <ng-template #footer>
            <p-button label="Cancel" [text]="true" severity="secondary" (click)="visible = false" />
            <p-button label="Save" [outlined]="true" severity="secondary" (click)="visible = false" (click)="addProduct()" />
        </ng-template>
    </p-dialog>
</div>